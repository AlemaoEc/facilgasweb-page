"use strict";var facilgasWeb=angular.module("gasfacilClientFrontApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngMaterial","pascalprecht.translate","vsGoogleAutocomplete","credit-cards","ngMask","ng-token-auth"]);facilgasWeb.config(["$authProvider",function(a){a.configure({apiUrl:"/api/v1/clients/",tokenValidationPath:"/validate_token",emailRegistrationPath:"",signOutUrl:"/sign_out",emailSignInPath:"/sign_in"})}]),facilgasWeb.config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/new_order.html",controller:"NewOrderCtrl",controllerAs:"newOrder"}).when("/select_address",{templateUrl:"views/select_address.html",controller:"SelectAddressCtrl",controllerAs:"selectAddress"}).when("/order_details",{templateUrl:"views/order_details.html",controller:"OrderDetailsCtrl",controllerAs:"orderDetails"}).when("/seeking_deliverers/:id",{templateUrl:"views/seeking_deliverers.html",controller:"SeekingDeliverersCtrl",controllerAs:"seekingDeliverers"}).when("/use_coupons",{templateUrl:"views/use_coupons.html",controller:"UseCouponsCtrl",controllerAs:"useCoupons"}).when("/buy_coupon",{templateUrl:"views/buy_coupon.html",controller:"BuyCouponCtrl",controllerAs:"buyCoupon"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),facilgasWeb.config(["$provide",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{datepicker:{labelMonthNext:"Próximo Mês",labelMonthPrev:"Mês Anterior",labelMonthSelect:"Selecione o Mês",labelYearSelect:"Selecione o ano",today:"Hoje",clear:"Limpar",close:"Fechar"},TIME:{hours:"horas",hour:"hora",minutes:"minutos",minute:"minuto"},DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Domingo","Segunda-feira","Terça-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sábado"],ERANAMES:["Antes de Cristo","Ano do Senhor"],ERAS:["a.C.","d.C."],FIRSTDAYOFWEEK:6,MONTH:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],SHORTDAY:["dom","seg","ter","qua","qui","sex","sáb"],SHORTMONTH:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],STANDALONEMONTH:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],WEEKDAYSLETTER:["D","S","T","Q","Q","S","S"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d 'de' MMMM 'de' y",longDate:"d 'de' MMMM 'de' y",medium:"dd/MM/yyyy HH:mm:ss",mediumDate:"dd/MM/yyyy",mediumTime:"HH:mm:ss","short":"dd/MM/yy HH:mm",shortDate:"dd/MM/yy",shortTime:"HH:mm",shortDate1:"dd/MM",shortTime1:"HH'h'mm",shortTime2:"HH'h'"},NUMBER_FORMATS:{CURRENCY_SYM:"R$ ",DECIMAL_SEP:",",GROUP_SEP:".",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"pt-br",localeID:"pt_BR",pluralCat:function(a,c){return a>=0&&2>=a&&2!=a?b.ONE:b.OTHER}})}]),facilgasWeb.constant("APP_VERSION","1.0.0").constant("IUGU_API_KEY","0dfe6db35a2f62a716af58cbf7d9ec2e").constant("IUGU_ACCOUNT_ID","5feff699-87a4-4db5-b3db-b7c75f6ea1d6"),facilgasWeb.config(["$translateProvider",function(a){a.translations("pt-br",{app_name:"Fácil Gás",buttons:{ok:"OK",no:"NÃO",yes:"SIM",use:"USAR",close:"FECHAR",send:"ENVIAR",waiting:"AGUARDE...",cancel:"CANCELAR","continue":"AVANÇAR",finish:"FINALIZAR"},sidenav:{items:{new_order:"Pedir gás",gas_coupons:"Meus vales gás",orders:"Meus pedidos",support:"Suporte",about:"Sobre"}},new_order:{order_gas:"Gás",order_water:"Água",order:"FAZER PEDIDO",gas_coupons:"COMPRE VALE GÁS"},select_address:{title:"Informações de entrega",destination_address:"ENDEREÇO DE ENTREGA",city:"Cidade",street:"Rua ou Avenida",number:"Número",complement:"Complemento (opcional)",reference:"Referência (opcional)",personal_info:"SUAS INFORMAÇÕES",name:"Nome",email:"Email"},order_details:{title:"Fazer pedido",gas_description:"Botijão de gás",gas_size:"13kg",water_description:"Galão de água",water_size:"20L",payment_methods:"Formas de Pagamento",pay_with_coupons:"Pague usando o vale gás",payment_method:"Forma de pagamento",credit_card_flag:"Bandeira",coupons_in_use:"{{coupon_in_use}}/{{coupons}} Vales",coupons:"Vales"},use_coupons:{title:"Meus Vales Gás",loading_message:"Buscando vales gás...",product_size:"Botijão: 13kg",product_end:"Validade: "},buy_coupon:{title:"Pagamento",description:"Usamos o método de pagamento por cartão de crédito do iugu. A forma mais segura e prática para você realizar sua compra a partir de qualquer plataforma.",card_number:"Número do Cartão",card_name:"Nome no cartão",card_expiration:"MM/AA",card_cvv:"CVV",call:"FINALIZAR PAGAMENTO",validations:{card_name:{required:"Informe o nome presente no cartão"},card_number:{required:"Informe o número do cartão",cc_number:"Número inválido",cc_number_type:"Tipo do cartão inválido"},card_code:{required:"Informe o código de segurança do cartão",cc_cvc:"Código inválido"},card_exp:{required:"Informe o mes e ano da validade do cartão",mask:"Data inválida"}}},seeking_deliverers:{searching_deliverers:"Buscando Entregadores",products:"Seus pedidos",payment_method:"Forma de Pagamento",address:"Endereço de Entrega",loading_message:"Buscando dados do pedido...",cancel_order:"CANCELAR PEDIDO",product:{gas:{name:"Botijão de Gás",description:"{{quantity}} Unidades (13kg)"},water:{name:"Galão de Água",description:"{{quantity}} Unidades (20L)"}},payment_methods:{debit_card:"Cartão débito",credit_card:"Cartão crédito",cash:"Dinheiro"}},abbr_days_names:{sunday:"D",monday:"S",tuesday:"T",wednesday:"Q",thursday:"Q",friday:"S",saturday:"S"},dialog_error_api:{title:"Oppss...",description:"Houve um erro ao tentar se comunicar com o servidor."},dialog_error_payment:{title:"Oppss...",description:"Houve um erro ao tentar realizar o pagamento. Por favor, verifique seus dados e tente novamente."},dialog_order_made:{title:"Pedido efetuado",description:"Seu pedido foi efetuado com SUCESSO! Aguarde um entregador aceitar sua entrega. Quando ela for aceita você será notificado.",call:"Ver pedido"},dialog_order_erro:{title:"Erro ao realizar o pedido",description:"Aconteceu algum erro inesperado ao realizar seu pedido.",call:"Tentar novamente"},dialog_payment_made:{title:"Oppss...",description:"Houve um erro ao tentar realizar o pagamento. Por favor, verifique seus dados e tente novamente."},fg_alert:{empty:{message:"Esse registro não está disponível ou não existe",button_text:"Recarregar"},error:{message:"Houve um erro ao tentar se comunicar com o servidor"},required:"Este campo é obrigatório"}}),a.useSanitizeValueStrategy("escape"),a.preferredLanguage("pt-br")}]),facilgasWeb.controller("SidenavCtrl",["$location","$mdSidenav",function(a,b){var c=this,d=[{label:"sidenav.items.new_order",link:"/","class":"menu-new-order"},{label:"sidenav.items.gas_coupons",link:"/gas_coupons","class":"menu-gas-coupons"},{label:"sidenav.items.orders",link:"/orders","class":"menu-orders"},{label:"sidenav.items.support",link:"/support","class":"menu-support"},{label:"sidenav.items.about",link:"/about","class":"menu-about"}];c.build=function(){c.menu=d},c.goTo=function(c){b("sidenav-main").close().then(function(){void 0!=c&&a.path(c.link)})},c.itemIsActive=function(b){return void 0!=b&&b==a.path()}}]),facilgasWeb.controller("ToolbarCtrl",["$mdSidenav","toolbarService",function(a,b){var c=this;c.data={};var d=function(a){c.showSidenav=a.getShowSidenav(),c.title=a.getTitle(),c.onSubmitPressed=a.getOnSubmitPressed(),c.onBackPressed=a.getOnBackPressed()};c.toogleSidenav=function(){a("sidenav-main").toggle()},b.registerObservers(d)}]),facilgasWeb.controller("DialogCtrl",["$mdDialog","fgShared",function(a,b){var c=this;c.fgShared=b,c.ok=function(){a.hide()},c.cancel=function(){a.cancel()}}]),angular.module("gasfacilClientFrontApp").controller("MainCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("gasfacilClientFrontApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),facilgasWeb.controller("NewOrderCtrl",["toolbarService","orderService","digitsService","dialogService","notificationService","$location","$auth",function(a,b,c,d,e,f,g){var h=this,i=new a.Toolbar;i.setTitle(void 0),i.setShowSidenav(!0),i.notify(),h.data={gas:void 0===b.getNeedsGas()?!1:b.getNeedsGas(),water:void 0===b.getNeedsWater()?!1:b.getNeedsWater()},e.checkIfServiceWorkerIsSupported(),h.toggleGas=function(){h.data.gas=!h.data.gas},h.toggleWater=function(){h.data.water=!h.data.water},h.newOrder=function(){g.validateUser().then(function(a){h.goToSelectAddress()})["catch"](function(a){c.login()})},h.buyCoupon=function(){f.url("/buy_coupon")},h.registerUser=function(a){console.log(a),g.submitRegistration({email:a.email,password:"secret123",password_confirmation:"secret123",name:a.name,phone:a.phone}).then(function(a){h.goToSelectAddress()})["catch"](function(a){d.show({templateUrl:"views/dialogs/error-api.html"})})},h.goToSelectAddress=function(){b.setNeedsGas(h.data.gas),b.setNeedsWater(h.data.water),f.url("/select_address")},c.registerObservers(h.registerUser)}]),facilgasWeb.controller("SelectAddressCtrl",["toolbarService","orderService","$location",function(a,b,c){var d=this,e=new a.Toolbar;e.setTitle("select_address.title"),e.setShowSidenav(!1),e.setOnBackPressed(function(){c.url("/")}),e.setOnSubmitPressed(function(){d.submit()}),e.notify(),d.processingForm=!1,d.autoCompleteCitiesOptions={types:["(cities)"],componentRestrictions:{country:"BR"}},d.autoCompleteAddressOptions={types:["address"],componentRestrictions:{country:"BR"}},d.data={address:b.getAddress()||{city:void 0,full_address:void 0,number:void 0,complement:void 0,reference:void 0},user_info:{name:void 0,email:void 0}},d.submit=function(){console.log(d.data.address),void 0!==d.form.$valid&&d.form.$valid&&(d.processingForm=!0,b.setAddress(d.data.address),c.url("/order_details"))}}]),facilgasWeb.controller("OrderDetailsCtrl",["toolbarService","orderService","dialogService","Order","Voucher","$mdToast","$location",function(a,b,c,d,e,f,g){var h=this,i=new a.Toolbar;i.setTitle("order_details.title"),i.setShowSidenav(!1),i.setOnBackPressed(function(){g.url("/select_address")}),i.setOnSubmitPressed(function(){h.submit()}),i.notify(),h.processingForm=!1,h.showLoading=!0,e.query().$promise.then(function(a){h.data.vouchers=a,h.showLoading=!1})["catch"](function(a){console.log(a)}),h.data={order_info:{products:b.getProducts()||[{product_type:0,quantity:b.getNeedsGas()?1:0},{product_type:1,quantity:b.getNeedsWater()?1:0}],coupons:b.getCoupons()||[],payment_method:b.getPaymentMethod(),credit_card_flag:b.getCardFlag()},vouchers:[],payment_methods:[{value:"credit_card",name:"Cartão de crédito"},{value:"debit_card",name:"Cartão de débito"},{value:"cash",name:"Dinheiro"}],credit_card_flags:[{value:"master",name:"Master"},{value:"visa",name:"Visa"},{value:"elo",name:"Elo"},{value:"amex",name:"Amex"},{value:"diners",name:"Diners"}]},console.log(h.data),console.log(h.data.vouchers.length.toString()),console.log(h.data.order_info.coupons.length.toString()),h.addGas=function(){h.data.order_info.products[0].quantity=h.data.order_info.products[0].quantity+1},h.removeGas=function(){h.data.order_info.products[0].quantity>0&&(h.data.order_info.products[0].quantity=h.data.order_info.products[0].quantity-1)},h.addWater=function(){h.data.order_info.products[1].quantity=h.data.order_info.products[1].quantity+1},h.removeWater=function(){h.data.order_info.products[1].quantity>0&&(h.data.order_info.products[1].quantity=h.data.order_info.products[1].quantity-1)},h.needsCardFlag=function(){return"credit_card"===h.data.order_info.payment_method||"debit_card"===h.data.order_info.payment_method},h.useCoupons=function(){g.url("/use_coupons")},h.submit=function(){void 0!==h.form.$valid&&h.form.$valid?(h.processingForm=!0,b.setProducts(h.data.order_info.products),b.setCoupons(h.data.order_info.coupons),b.setPaymentMethod(h.data.order_info.payment_method),b.setCardFlag(h.data.order_info.credit_card_flag),d.save(b.getOrder()).$promise.then(function(a){console.log(a),c.show({templateUrl:"views/dialogs/order-made.html"}).then(function(){g.url("/seeking_deliverers/"+a.order_id)})})["catch"](function(a){console.log(a),c.show({templateUrl:"views/dialogs/order-error.html"}).then(function(){h.processingForm=!1})})):void 0===h.data.order_info.payment_method?f.show(f.simple().textContent("Informe a forma de pagamento.")):f.show(f.simple().textContent("Informe a bandeira do seu cartão."))}}]),facilgasWeb.controller("UseCouponsCtrl",["toolbarService","orderService","Voucher","$location",function(a,b,c,d){var e=this,f=new a.Toolbar;f.setTitle("use_coupons.title"),f.setShowSidenav(!1),f.setOnBackPressed(function(){d.url("/order_details")}),f.setOnSubmitPressed(function(){e.submit()}),f.notify(),e.data={order_info:{coupons:[]},vouchers:[]},e.showLoading=!0,c.query().$promise.then(function(a){e.data.vouchers=a,e.showLoading=!1})["catch"](function(a){console.log(a)}),e.toggleCoupon=function(a){var b=e.data.order_info.coupons.indexOf(a);b>-1?e.data.order_info.coupons.splice(b,1):e.data.order_info.coupons.push(a),console.log(e.data.order_info)},e.exists=function(a){return console.log(e.data.order_info),-1!==e.data.order_info.coupons.indexOf(a)},e.submit=function(){b.setCoupons(e.data.order_info.coupons),d.url("/order_details")}}]),facilgasWeb.controller("BuyCouponCtrl",["toolbarService","iuguService","$location",function(a,b,c){var d=this,e=new a.Toolbar;e.setTitle("buy_coupon.title"),e.setShowSidenav(!1),e.setOnBackPressed(function(){c.url("/")}),d.data={card_number:void 0,card_name:void 0,card_expiration:void 0,card_cvv:void 0},e.notify(),d.submit=function(a){b.submitCreditCardValues(a.target,function(a){a.errors?console.log("Error"):(console.log(a.id),c.url("/"))})}}]),facilgasWeb.controller("SeekingDeliverersCtrl",["toolbarService","orderService","Order","$location","$routeParams",function(a,b,c,d,e){var f=this;f.showLoading=!0;var g=new a.Toolbar;g.setShowSidenav(!0),g.notify(),f.data={},c.get({id:e.id}).$promise.then(function(a){f.showLoading=!1,f.order=a,console.log(a)})["catch"](function(a){f.showLoading=!1,f.showMessage=!0})}]),facilgasWeb.factory("notificationService",["IUGU_API_KEY","IUGU_ACCOUNT_ID",function(a,b){var c=!1,d=function(){"serviceWorker"in navigator?(navigator.serviceWorker.register("serviceworker.js").then(e),console.error("Service workers supported")):console.warn("Service workers aren't supported in this browser.")},e=function(){return console.error("initialiseState"),"showNotification"in ServiceWorkerRegistration.prototype?"denied"===Notification.permission?void console.warn("The user has blocked notifications."):"PushManager"in window?void navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){a&&(console.log(a),c=!0)})["catch"](function(a){console.warn("Error during getSubscription()",a)})}):void console.warn("Push messaging isn't supported."):void console.warn("Notifications aren't supported.")},f=function(){navigator.serviceWorker.ready.then(function(a){a.pushManager.subscribe().then(function(a){c=!0,console.log(a)})["catch"](function(a){"denied"===Notification.permission?console.warn("Permission for Notifications was denied"):console.error("Unable to subscribe to push.",a)})})},g=function(){navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){if(!a)return void(c=!1);a.subscriptionId;a.unsubscribe().then(function(a){c=!1})["catch"](function(a){console.log("Unsubscription error: ",a)})})["catch"](function(a){console.error("Error thrown while unsubscribing from push messaging.",a)})})};return{checkIfServiceWorkerIsSupported:d,initialiseState:e,subscribe:f,unsubscribe:g}}]),facilgasWeb.factory("toolbarService",function(){var a=[],b={BACK:"back",CLOSE:"close"},c=function(){var b,c,d,e;this.setShowSidenav=function(a){b=a},this.getShowSidenav=function(){return b},this.setTitle=function(a){c=a},this.getTitle=function(){return c},this.setOnSubmitPressed=function(a){d=a},this.getOnSubmitPressed=function(){return d},this.setOnBackPressed=function(a){e=a},this.getOnBackPressed=function(){return e},this.notify=function(){for(var b=0,c=a.length;c>b;b++){var d=a[b];d(this)}}},d=function(b){a.push(b)};return{Toolbar:c,registerObservers:d,actions:b}}),facilgasWeb.factory("orderService",["$cookies",function(a){var b=[],c={order_id:void 0,address:void 0,needs_gas:void 0,needs_water:void 0,coupons:void 0,payment_method:void 0,card_flag:void 0,products:void 0},d=function(){return c},e=function(a){void 0!==a&&(c.products.push(a),y(!0))},f=function(a){if(void 0!==a)for(var b=0,d=c.products.length;d>b;b++){var e=c.products[b];if(void 0!==e.item_id&&e.item_id===a)return e}},g=function(a,b){if(void 0!==a&&void 0!==b)for(var d=0,e=c.products.length;e>d;d++){var f=c.products[d];if(void 0!==f.item_id&&f.item_id===a){angular.extend(f,b),y(!1);break}}},h=function(a){if(void 0!==a)for(var b=0,d=c.products.length;d>b;b++){var e=c.products[b];if(void 0!==e.item_id&&e.item_id===a){c.products.splice(b,1),y(!0);break}}},i=function(a){c.order_id=a,y(!1)},j=function(){return c.order_id},k=function(a){c.address=a,y(!1)},l=function(){return c.address},m=function(a){c.needs_water=a,y(!1)},n=function(){return c.needs_water},o=function(a){c.needs_gas=a,y(!1)},p=function(){return c.needs_gas},q=function(a){c.products=a,y(!1)},r=function(){return c.products},s=function(a){c.coupons=a,y(!1)},t=function(){return c.coupons},u=function(a){c.card_flag=a,y(!1)},v=function(){return c.card_flag},w=function(a){c.payment_method=a,y(!1)},x=function(){return c.payment_method},y=function(a){a&&A(c)},z=function(){c={products:[]},y(!0)},A=function(a){for(var c=0,d=b.length;d>c;c++){var e=b[c];e(a)}},B=function(a){b.push(a)};return{updateItem:g,removeItem:h,addItem:e,getOrder:d,setOrderId:i,getAddress:l,setAddress:k,getNeedsGas:p,setNeedsGas:o,getNeedsWater:n,setNeedsWater:m,getProducts:r,setProducts:q,getCoupons:t,setCoupons:s,getPaymentMethod:x,setPaymentMethod:w,getCardFlag:v,setCardFlag:u,getOrderId:j,clearOrder:z,getItemById:f,registerObservers:B}}]),facilgasWeb.factory("iuguService",["IUGU_API_KEY","IUGU_ACCOUNT_ID",function(a,b){var c=function(){Iugu.setAccountID(b),Iugu.setTestMode(!0)},d=function(a,b){c(),console.log(a),Iugu.createPaymentToken(a,function(a){void 0!==b&&b(a)})};return{setupIugu:c,submitCreditCardValues:d}}]),facilgasWeb.factory("dialogService",["$mdDialog",function(a){var b=[],c={controller:"DialogCtrl",controllerAs:"dialog",fgShared:{}},d=function(b){var d;return b=b||{},b=angular.extend(c,b),f(!0),d=a.show(b),d.then(function(){f(!1)})["catch"](function(){f(!1)}),d},e=function(a){b.push(a)},f=function(a){for(var c=0,d=b.length;d>c;c++){var e=b[c];e(a)}};return{show:d,registerObservers:e}}]),facilgasWeb.factory("digitsService",["$window","$http","dialogService",function(a,b,c){var d=[];angular.element("digits-sdk").ready(function(){Digits.init({consumerKey:"qx8nWieEm8CPMT0fi8imLW8Sc"}).done(function(){console.log("Digits initialized.")}).fail(function(){console.log("Digits failed to initialize.")})});var e=function(){Digits.logIn({accountFields:Digits.AccountFields.Email,phoneNumber:"+55"}).done(f).fail(j)},f=function(a){console.log("Digits login succeeded.");var d=a.oauth_echo_headers["X-Auth-Service-Provider"],e=a.oauth_echo_headers["X-Auth-Service-Provider"];g(e)&&b({method:"GET",url:d,headers:{Authorization:e}}).then(function(a){h(a.data)},function(a){console.log("Error in twitter API"),console.log(a),c.show({fgShared:{message:a.data.join(" ")},templateUrl:"views/dialogs/error-api.html"})})},g=function(a){var b=!0,d=[];return-1==a.indexOf('oauth_consumer_key="qx8nWieEm8CPMT0fi8imLW8Sc"')&&(b=!1,d.push("The Digits API key does not match.")),b||c.show({fgShared:{message:d.join(" ")},templateUrl:"views/dialogs/error-api.html"}),b},h=function(a){for(var b=0,c=d.length;c>b;b++){var e=d[b];e(a)}},i=function(a){d.push(a)},j=function(a){console.log("var onLoginFailure = function(response) {"),console.log(a)};return{login:e,registerObservers:i}}]),facilgasWeb.factory("Voucher",["$resource",function(a){return a("/api/v1/clients/orders/vouchers/:id")}]),facilgasWeb.factory("Order",["$resource",function(a){return a("/api/v1/clients/orders/:id")}]),facilgasWeb.factory("User",["$resource",function(a){return a("/app/v1/users/:id",null,{login:{method:"POST",url:"/app/v1/users/login"},resetPassword:{method:"POST",url:"/app/v1/users/reset_password"},updatePasswordWithToken:{method:"PUT",url:"/app/v1/users/update_password_with_token"},updatePassword:{method:"PUT",url:"/app/v1/users/update_password"},checkEmail:{method:"GET",url:"/app/v1/users/check_email"},update:{method:"POST",url:"/app/v1/users/me"}})}]),facilgasWeb.directive("tcProgressCircular",["$parse",function(a){return{restrict:"E",scope:{visible:"=",message:"=",absoluteLoadingOnMobile:"="},templateUrl:"views/shared/progress-circular.html"}}]),facilgasWeb.filter("capitalize",function(){return function(a,b){return null!=a&&(a=a.toLowerCase()),a.substring(0,1).toUpperCase()+a.substring(1)}}),angular.module("gasfacilClientFrontApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/buy_coupon.html",'<div class="container container-body container-buy-coupon"> <div class="buy-info-content row"> <div class="col-xs-12"> <div class="col-md-2 col-xs-2"> <div class="image-content"> <img src="images/ic_block.svg" alt="Block"> </div> </div> <div class="col-md-10 col-xs-10"> <p> {{ \'buy_coupon.description\' | translate }} </p> </div> </div> <div class="suported-cards-content"> <img src="http://storage.pupui.com.br/9CA0F40E971643D1B7C8DE46BBC18396/assets/payments-by-iugu.1df7caaf6958f1b5774579fa807b5e7f.png" alt="Pagamentos por Iugu"> </div> </div> <div class="row"> <form name="buyCoupon.form" novalidate ng-submit="::buyCoupon.submit($event)"> <div class="content-inputs"> <md-input-container class="form-input"> <label>{{ \'buy_coupon.card_number\' | translate }}</label> <input name="card_number" ng-model="buyCoupon.data.card_number" data-iugu="number" cc-number cc-type="cardType" cc-format required> </md-input-container> <md-input-container class="form-input"> <label>{{ \'buy_coupon.card_name\' | translate }}</label> <input name="card_name" data-iugu="full_name" ng-model="buyCoupon.data.card_name" required> <!-- <div ng-messages="form.street.$error" ng-show="form.street.$dirty">\n			      <div ng-message="required">{{ \'fg_alert.required\' | translate }}</div>\n			    </div> --> </md-input-container> <md-input-container class="form-input"> <label>{{ \'buy_coupon.card_expiration\' | translate }}</label> <input name="card_expiration" data-iugu="expiration" ng-model="buyCoupon.data.card_expiration" mask="19/99" required> </md-input-container> <md-input-container class="form-input"> <label>{{ \'buy_coupon.card_cvv\' | translate }}</label> <input name="card_cvv" cc-cvc cc-type="buyCoupon.data.card_number.$ccType" ng-model="buyCoupon.data.card_cvv" data-iugu="verification_value" required> </md-input-container> <div class="suported-cards-content"> <img src="http://storage.pupui.com.br/9CA0F40E971643D1B7C8DE46BBC18396/assets/cc-icons.e8f4c6b4db3cc0869fa93ad535acbfe7.png" alt="Visa, Master, Diners. Amex"> </div> <md-button type="submit" class="fg-button-primary form-button" ng-disabled="buyCoupon.processingForm"> {{ (buyCoupon.processingForm ? \'buttons.waiting\' : \'buy_coupon.call\' ) | translate }} </md-button> </div> </form></div>  </div>'),a.put("views/dialogs/error-api.html",'<md-dialog class="tc-dialog tc-dialog-error"> <md-dialog-content class="md-dialog-content"> <h2 class="md-title"> {{ ::\'dialog_error_api.title\' | translate }} </h2> <div class="md-dialog-content-body"> <p>{{ ::\'dialog_error_api.description\' | translate }}</p> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click="::dialog.ok()" class="md-primary"> {{ ::\'buttons.ok\' | translate }} </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/dialogs/error-payment.html",'<md-dialog class="tc-dialog tc-dialog-error"> <md-dialog-content class="md-dialog-content"> <h2 class="md-title"> {{ ::\'dialog_error_payment.title\' | translate }} </h2> <div class="md-dialog-content-body"> <p>{{ ::dialog.fgShared.message }}</p> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click="::dialog.ok()" class="md-primary"> {{ ::\'buttons.ok\' | translate }} </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/dialogs/order-error.html",'<md-dialog class="tc-dialog"> <div class="dialog-header order-error"> <img src="images/ic_gas_dead.svg" alt="Gás dead"> </div> <md-dialog-content class="md-dialog-content"> <h2 class="md-title"> {{ ::\'dialog_order_erro.title\' | translate }} </h2> <div class="md-dialog-content-body"> <p>{{ ::\'dialog_order_erro.description\' | translate }}</p> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click="::dialog.ok()" class="md-primary"> {{ ::\'dialog_order_erro.call\' | translate }} </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/dialogs/order-made.html",'<md-dialog class="tc-dialog"> <div class="dialog-header order-made"> <img src="images/ic_gas_happy.svg" alt="Gás happy"> </div> <md-dialog-content class="md-dialog-content"> <h2 class="md-title"> {{ ::\'dialog_order_made.title\' | translate }} </h2> <div class="md-dialog-content-body"> <p>{{ ::\'dialog_order_made.description\' | translate }}</p> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click="::dialog.ok()" class="md-primary"> {{ ::\'dialog_order_made.call\' | translate }} </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/dialogs/payment-made.html",'<md-dialog class="tc-dialog"> <md-dialog-content class="md-dialog-content"> <h2 class="md-title"> {{ ::\'dialog_payment_made.title\' | translate }} </h2> <div class="md-dialog-content-body"> <p>{{ ::\'dialog_payment_made.description\' | translate }}</p> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click="::dialog.ok()" class="md-primary"> {{ ::\'buttons.ok\' | translate }} </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/dialogs/shared.html",'<md-dialog class="tc-dialog container-dialog-shared"> <md-dialog-content class="md-dialog-content"> <h2 class="md-title"> {{ ::\'dialog_shared.title\' | translate }} </h2> <div class="md-dialog-content-body"> <div layout="column" layout-align="center stretch"> <div layout="row" layout-align="center center" class="links"> <a ng-href="https://www.facebook.com/sharer/sharer.php?u={{ ::dialog.fgShared.encodeLink }}" target="_blank"> <img src="images/ic_facebook.svg" alt="Facebook"> </a> <a ng-href="https://twitter.com/home?status={{ ::\'dialog_shared.description_cheff\' | translate:{cheff_name: dialog.fgShared.name} }} {{dialog.fgShared.encodeLink}}" target="_blank"> <img src="images/ic_twitter.svg" alt="Twitter"> </a> <a ng-href="https://plus.google.com/share?url={{ ::dialog.fgShared.encodeLink }}" target="_blank"> <img src="images/ic_google_plus.svg" alt="Google Plus"> </a> </div> <md-input-container> <input md-select-on-focus md-autofocus readonly aria-label="Link" value="{{ ::\'dialog_shared.description_cheff\' | translate:{cheff_name: dialog.fgShared.name} }} {{dialog.fgShared.link}}"> </md-input-container> </div> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-click="::dialog.ok()" class="md-primary"> {{ ::\'buttons.close\' | translate }} </md-button> </md-dialog-actions> </md-dialog>'),a.put("views/new_order.html",'<div class="container container-body container-new-order"> <div class="content-new-order"> <div ng-click="::newOrder.toggleGas()" class="item-product-order row"> <div class="col-md-4 col-xs-2 item-image"> <img src="images/ic_gas_sad.svg" alt="Gás Dead"> </div> <div class="col-md-4 col-xs-9"> <span>{{ \'new_order.order_gas\' | translate }}</span> </div> <div class="col-md-4 col-xs-1 item-icon"> <md-checkbox ng-model="newOrder.data.gas" aria-label="gas"></md-checkbox> </div> </div> <div ng-click="::newOrder.toggleWater()" class="item-product-order row"> <div class="col-md-4 col-xs-2 item-image"> <img src="images/ic_water_sad.svg" alt="Water Dead"> </div> <div class="col-md-4 col-xs-9"> <span>{{ \'new_order.order_water\' | translate }}</span> </div> <div class="col-md-4 col-xs-1 item-icon"> <md-checkbox ng-model="newOrder.data.water" aria-label="water"></md-checkbox> </div> </div> <md-button ng-click="::newOrder.newOrder()" ng-disabled="(newOrder.data.gas !== true && newOrder.data.water !== true)" class="fg-button-secondary"> {{ \'new_order.order\' | translate }} </md-button> </div> </div> <div class="content-coupon row"> <div class="col-md-12 col-xs-12 content-item"> <div class="col-md-4 col-xs-4 content-image"> <img src="images/favicon16.png" alt="Promoção	"> </div> <div class="col-md-8 col-xs-8 content-description"> <h3>Promoção Imperdível</h3> <span>Vale Gás Lipigas por</span> <h2>R$ 39,99</h2> </div> </div> <div ng-click="::newOrder.buyCoupon()" class="col-md-12 col-xs-12 coupon-call"> <span>{{ \'new_order.gas_coupons\' | translate }}</span> </div> </div>'),a.put("views/order_details.html",'<div class="container container-body container-order-details"> <tc-progress-circular data-visible="orderDetails.showLoading" data-message="\'use_coupons.loading_message\'" data-absolute-loading-on-mobile="true"> </tc-progress-circular> <form name="orderDetails.form" novalidate ng-submit="::orderDetails.submit()"> <div class="product-type-content row"> <div class="col-md-2 col-xs-2 product-type-image"> <div class="image-content gas"> <img src="images/ic_gas.svg" alt="Gás"> </div> </div> <div class="col-md-6 col-xs-6 product-type-description"> <p class="product-title">{{ \'order_details.gas_description\' | translate }}</p> <p class="product-size">13kg</p> </div> <div class="col-md-4 col-xs-4 product-type-quantity"> <md-icon ng-click="::orderDetails.removeGas()" class="remove">&#xE15D;</md-icon> <span>{{ orderDetails.data.order_info.products[0].quantity }}</span> <md-icon ng-click="::orderDetails.addGas()" class="add">&#xE148;</md-icon> </div> </div> <div class="product-type-content row"> <div class="col-md-2 col-xs-2 product-type-image"> <div class="image-content water"> <img src="images/ic_water.svg" alt="Gás"> </div> </div> <div class="col-md-6 col-xs-6 product-type-description"> <p class="product-title">{{ \'order_details.water_description\' | translate }}</p> <p class="product-size">20L</p> </div> <div class="col-md-4 col-xs-4 product-type-quantity"> <md-icon ng-click="::orderDetails.removeWater()" class="remove">&#xE15D;</md-icon> <span>{{ orderDetails.data.order_info.products[1].quantity }}</span> <md-icon ng-click="::orderDetails.addWater()" class="add">&#xE148;</md-icon> </div> </div> <div class="form-section-header row"> <div class="col-md-2 col-xs-2"> <md-icon>&#xE870;</md-icon> </div> <div class="col-md-10 col-xs-10"> <span>{{ \'order_details.payment_methods\' | translate }}</span> </div> </div> <div class="product-type-content coupon-item row"> <div class="col-md-2 col-xs-2 product-type-image"> <div class="image-content coupon"> <img src="images/ic_ticket_white.svg" alt="Vale Gás"> </div> </div> <div class="col-md-7 col-xs-7 product-type-description"> <p class="product-title">{{ \'order_details.pay_with_coupons\' | translate }}</p> <p class="product-size">{{ \'order_details.coupons_in_use\' | translate:{ coupon_in_use: orderDetails.data.order_info.coupons.length, coupons: orderDetails.data.vouchers.length } }}</p> </div> <div class="col-md-3 col-xs-3 coupon-call"> <md-button ng-click="::orderDetails.useCoupons()" class="fg-button-coupon"> {{ \'buttons.use\' | translate }} </md-button> </div> </div> <div class="content-inputs"> <md-input-container class="form-input"> <label> {{ \'order_details.payment_method\' | translate }} </label> <md-select ng-model="orderDetails.data.order_info.payment_method" required> <md-option ng-value="method.value" ng-repeat="method in orderDetails.data.payment_methods">{{ method.name }}</md-option> </md-select> </md-input-container> <md-input-container ng-if="orderDetails.needsCardFlag()" ng-show="orderDetails.needsCardFlag()" class="form-input"> <label> {{ \'order_details.credit_card_flag\' | translate }} </label> <md-select ng-model="orderDetails.data.order_info.credit_card_flag" required> <md-option ng-value="flag.value" ng-repeat="flag in orderDetails.data.credit_card_flags">{{ flag.name }}</md-option> </md-select> </md-input-container> <md-button type="submit" class="fg-button-primary form-button" ng-disabled="orderDetails.processingForm"> {{ (orderDetails.processingForm ? \'buttons.waiting\' : \'buttons.finish\' ) | translate }} </md-button> </div> </form> </div>'),
a.put("views/seeking_deliverers.html",'<div class="container container-body container-seeking-deliverers"> <tc-progress-circular data-visible="seekingDeliverers.showLoading" data-message="\'seeking_deliverers.loading_message\'" data-absolute-loading-on-mobile="true"> </tc-progress-circular> <div class="order-content"> <div class="seeking-deliveres-content"> <div class="image-content"> <img src="images/img_map_search.svg" alt="Buscando Entregadores"> </div> <h2>{{ \'seeking_deliverers.searching_deliverers\' | translate }}</h2> </div> <div class="products-content"> <p>{{ \'seeking_deliverers.products\' | translate }}</p> <div class="product row" ng-repeat="(key, product) in seekingDeliverers.order.order_products track by $index"> <div class="col-md-2 col-xs-2 product-image"> <div class="image-content {{product.product_type_solicited}}"> <img ng-if="product.product_type_solicited == \'gas\'" src="images/ic_gas.svg" alt="Gás"> <img ng-if="product.product_type_solicited == \'water\'" src="images/ic_water.svg" alt="Gás"> </div> </div> <div class="col-md-10 col-xs-10 product-description"> <p class="product-title"> {{ \'seeking_deliverers.product.\' + product.product_type_solicited + \'.name\' | translate }} </p> <p class="product-description">{{ \'seeking_deliverers.product.\' + product.product_type_solicited + \'.description\' | translate:{ quantity: product.quantity } }} </p> </div> </div> </div> <div class="order-details-content"> <div class="details-info"> <p class="details-title"> {{ \'seeking_deliverers.payment_method\' | translate }} </p> <p class="details-description">{{ seekingDeliverers.order.card_flag | capitalize }} - {{ \'seeking_deliverers.payment_methods.\' + seekingDeliverers.order.payment_method | translate }} </p> </div> <div class="details-info"> <p class="details-title"> {{ \'seeking_deliverers.address\' | translate }} </p> <p class="details-description">{{ seekingDeliverers.order.address.full_address }} </p> </div> </div> <md-button ng-click="seekingDeliverers.cancelOrder()" class="fg-button-warning"> {{ (seekingDeliverers.processingForm ? \'buttons.waiting\' : \'seeking_deliverers.cancel_order\' ) | translate }} </md-button> </div> </div>'),a.put("views/select_address.html",'<div class="container container-body container-select-address"> <form name="selectAddress.form" novalidate ng-submit="::selectAddress.submit()"> <div class="form-section-header row"> <div class="col-md-2 col-xs-2"> <md-icon>&#xE55F;</md-icon> </div> <div class="col-md-10 col-xs-10"> <span>{{ \'select_address.destination_address\' | translate }}</span> </div> </div> <div class="content-inputs"> <md-input-container class="form-input"> <label>{{ \'select_address.city\' | translate }}</label> <input vs-google-autocomplete="selectAddress.autoCompleteCitiesOptions" name="city" ng-model="selectAddress.data.address.city" required> <!-- <div ng-messages="form.city.$error" ng-show="form.city.$dirty">\n		      <div ng-message="required">{{ \'fg_alert.required\' | translate }}</div>\n		    </div> --> </md-input-container> <md-input-container class="form-input"> <label>{{ \'select_address.street\' | translate }}</label> <input vs-google-autocomplete="selectAddress.autoCompleteAddressOptions" name="full_address" ng-model="selectAddress.data.address.full_address" required> <!-- <div ng-messages="form.street.$error" ng-show="form.street.$dirty">\n		      <div ng-message="required">{{ \'fg_alert.required\' | translate }}</div>\n		    </div> --> </md-input-container> <md-input-container class="form-input"> <label>{{ \'select_address.number\' | translate }}</label> <input name="number" ng-model="selectAddress.data.address.number" required> <!-- <div ng-messages="form.number.$error" ng-show="form.number.$dirty">\n		      <div ng-message="required">{{ \'fg_alert.required\' | translate }}</div>\n		    </div> --> </md-input-container> <md-input-container class="form-input"> <label>{{ \'select_address.complement\' | translate }}</label> <input name="complement" ng-model="selectAddress.data.address.complement"> </md-input-container> <md-input-container class="form-input"> <label>{{ \'select_address.reference\' | translate }}</label> <input name="reference" ng-model="reference"> </md-input-container> </div> <!-- TODO: Login --> <!-- <div class="form-section-header user-info row">\n			<div class="col-md-2 col-xs-2">\n				<md-icon>&#xE7FD;</md-icon>\n			</div>\n			<div class="col-md-10 col-xs-10">\n				<span>{{ \'select_address.personal_info\' | translate }}</span>\n			</div>\n		</div> --> <div class="content-inputs"> <!-- <md-input-container class="form-input">\n		    <label>{{ \'select_address.name\' | translate }}</label>\n		    <input name="name" ng-model="selectAddress.data.user_info.name" required>\n		  </md-input-container>\n	  \n			<md-input-container class="form-input">\n		    <label>{{ \'select_address.email\' | translate }}</label>\n		    <input name="email" ng-model="selectAddress.data.user_info.email" required>\n		  </md-input-container> --> <md-button type="submit" class="fg-button-primary form-button" ng-disabled="selectAddress.processingForm"> {{ (selectAddress.processingForm ? \'buttons.waiting\' : \'buttons.continue\' ) | translate }} </md-button> </div> </form> </div>'),a.put("views/shared/header.html",'<md-toolbar ng-controller="ToolbarCtrl as toolbar" class="toolbar-main"> <div class="md-toolbar-tools"> <md-button ng-click="toolbar.toogleSidenav()" ng-if="toolbar.showSidenav" class="md-icon-button"> <md-icon>&#xE5D2;</md-icon> </md-button> <md-button ng-click="toolbar.onBackPressed()" class="md-icon-button" ng-if="toolbar.onBackPressed != undefined"> <md-icon>&#xE317;</md-icon> </md-button> <h2 class="title" ng-if="toolbar.title != undefined"> <span>{{ toolbar.title | translate }}</span> </h2> <img ng-if="toolbar.title == undefined" src="images/logo_dark.svg"> <span ng-if="toolbar.title !== undefined" flex></span> <md-button ng-click="toolbar.onSubmitPressed()" class="md-icon-button" ng-if="toolbar.onSubmitPressed != undefined"> <md-icon>&#xE876;</md-icon> </md-button> </div> </md-toolbar> <md-sidenav class="md-sidenav-left md-whiteframe-z2 container-sidenav" md-component-id="sidenav-main"> <div ng-controller="SidenavCtrl as sidenav" ng-init="::sidenav.build()"> <md-content class="content-logo"> <div class="content-logo"> <img src="images/logo_dark.svg"> </div> </md-content> <ul class="tc-list content-itens"> <li ng-repeat="(key, item) in sidenav.menu track by $index" ng-click="sidenav.goTo(item)" ng-class="{\'active\': sidenav.itemIsActive(item.link) }" md-ink-ripple class="item {{ item.class }}"> <a href=""> {{ item.label | translate }} </a> </li> </ul> </div> </md-sidenav>'),a.put("views/shared/progress-circular.html",'<div ng-show="visible" ng-class="{ \'absolute-loading-on-mobile\': absoluteLoadingOnMobile }" layout="row" layout-align="center center" class="container-tc-progress-circular"> <md-progress-circular md-mode="indeterminate" md-diameter="60"></md-progress-circular> <span class="text-waiting">{{ message | translate }}</span> </div>'),a.put("views/use_coupons.html",'<div class="container container-body container-use-coupons"> <tc-progress-circular data-visible="useCoupons.showLoading" data-message="\'use_coupons.loading_message\'" data-absolute-loading-on-mobile="true"> </tc-progress-circular> <div class="coupons-content"> <div ng-repeat="voucher in useCoupons.data.vouchers" class="coupon-content row"> <div class="col-md-4 col-xs-4 coupon-image"> <img src="images/ic_gas_dead_blue.svg" alt="Gás"> </div> <div class="col-md-6 col-xs-6 coupon-description"> <p class="coupon-price">{{ voucher.price | currency }}</p> <p class="coupon-info">{{ \'use_coupons.product_size\' | translate }}</p> <p class="coupon-info">{{ \'use_coupons.product_end\' | translate }}{{ voucher.end_date | date}}</p> </div> <div class="col-md-2 col-xs-2 coupon-select"> <md-checkbox ng-checked="useCoupons.exists(voucher)" ng-click="useCoupons.toggleCoupon(voucher)" aria-label="coupon"></md-checkbox> </div> </div> </div> </div>')}]);